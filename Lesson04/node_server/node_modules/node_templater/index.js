var fs = require('fs');
var p = require('path');
var TPL = {
	defaultFile: "default.html",
	temlateDir: "/templates/",
	findFile: function (fileName) {
		//формируем путь
		var path = process.cwd()+ this.temlateDir + fileName + ".tpl.html";
		path = p.normalize(path);
		console.log(path);
		//проверяем есть ли
		var isFile = fs.existsSync(path); //true or false
		//__dirname текущая 
		//process.cwd() - корневой где запущен
		if (!isFile) {
			path = process.cwd()+ this.temlateDir + this.defaultFile;
			path = p.normalize(path);
		};
		//считываем файл
        return fs.readFileSync(path).toString();

	},
	replace: function () {},
	init: function (tplName, data) {
		//tplName - имя файлы
		//data - объект данных
		//ищем файл tplName
		var file = this.findFile(tplName);
		console.log(file);
		return file;

	}
}

module.exports = TPL;